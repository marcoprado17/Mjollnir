{% extends "sidebarbase.html" %}


{% block head %}
    {{ super() }}
    <!--$('#myTab a').click(function (e) {
      e.preventDefault()
      $(this).tab('show')
    })-->
{% endblock %}

{% block main %}
  <div class="challenge">
    <div class="row">
      <div class="col-lg-12">
        {% if error %}
          <div class="alert alert-dismissable alert-danger register-fail">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            {{ error }}
          </div>
        {% endif %}
        <div class="height-60">
          <div class="float-left width-400">
            <h2>{{ challenge.name }}</h2>
          </div>
          <a class="btn btn-primary float-right margin-top-15" href="{{ url_for('submitsolution', challenge_name = challenge.name)}}">
            Submit a solution
          </a>
        </div>

        {% if is_active_user_in('Dev') %}
        <p align="right"><a href="{{ url_for('editchallenge', cid = challenge.cid) }}">Edit Challenge</a></p>
        <br/>
        {% endif %}

        <div>
          <ul id="challenge-tabs" class="nav nav-tabs">
            <li class="active"><a href="#description" data-toggle="tab">Description</a></li>
            <li><a href="#ranking" data-toggle="tab">Ranking</a></li>
          </ul>
          <div id="myTabContent" class="tab-content">
            
            <div class="tab-pane fade active in" id="description">
              {{ markdown_to_html(challenge.description) }}
            </div>
            
            <div class="tab-pane fade" id="ranking">
              <table class="table table-submissions">
                <thead>
                  <tr>
                    <th>Position</th>
                    <th>User</th>
                    <th>Rating</th>
                    <th>Deviation</th>
                  </tr>
                </thead>
                <tbody>
                  {% for solution in challenge_solutions %}
                  <tr>
                    <td>{{ solution.sequence }}</td>
                    <td><a href="{{ url_for('.user_page', username = solution.username) }}">{{ solution.username }}</a></td>
                    <td>{{ solution.rating }}</td>
                    <td>{{ solution.RD }}</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>
{% endblock %}
